<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bentok Lottere - HOTS Kedokteran PTN</title>
  <style>
    :root {
      --primary: #1e40af;
      --primary-dark: #1e3a8a;
      --success: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;
      --light: #f3f4f6;
      --dark: #111827;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #e0f2fe, #dbeafe);
      color: var(--dark);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.5;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.12);
      overflow: hidden;
    }
    header {
      background: var(--primary);
      color: white;
      padding: 2rem 1.5rem;
      text-align: center;
    }
    h1 { margin-bottom: 0.5rem; font-size: 2.2rem; }
    .menu, .game-area { padding: 2.5rem 2rem; text-align: center; }
    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 1.1rem 2.8rem;
      margin: 1rem 1rem;
      border-radius: 12px;
      font-size: 1.35rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover { background: var(--primary-dark); transform: translateY(-3px); }
    #score-board {
      font-size: 1.8rem;
      font-weight: bold;
      margin: 1.5rem 0;
      color: var(--primary);
    }
    #timer {
      font-size: 2rem;
      font-weight: bold;
      color: var(--danger);
      margin: 1rem 0;
    }
    #soal-text {
      font-size: 1.35rem;
      line-height: 1.8;
      margin: 1.5rem 0;
      text-align: left;
    }
    .options {
      display: grid;
      gap: 1rem;
      margin: 2rem 0;
    }
    .option {
      background: var(--light);
      padding: 1.3rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.25s;
      font-size: 1.15rem;
      border: 2px solid transparent;
      text-align: left;
    }
    .option:hover { background: #dbeafe; border-color: var(--primary); }
    #feedback {
      padding: 1.8rem;
      border-radius: 12px;
      margin: 2rem 0;
      font-size: 1.2rem;
      line-height: 1.6;
    }
    .correct   { background: #ecfccb; color: #166534; }
    .wrong     { background: #fee2e2; color: #991b1b; }
    .time-up   { background: #fef3c7; color: #92400e; }
    .hidden { display: none; }
    footer {
      text-align: center;
      padding: 1.5rem;
      color: #6b7280;
      font-size: 0.95rem;
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>Bentok Lottere</h1>
    <p>HOTS Saintek Kedokteran PTN â€“ Mode Lotere Intens</p>
  </header>

  <div id="menu" class="menu">
    <button onclick="startLotere()">MULAI LOTERE (15 Soal â€“ 60 Detik/Soal)</button>
    <button onclick="if(confirm('Yakin keluar? Progress hilang.')) window.close();">Keluar</button>
  </div>

  <div id="game" class="game-area hidden">
    <div id="score-board">Skor: <span id="score">0</span> / 15</div>
    <div id="timer">Sisa waktu: <span id="time">60</span> detik</div>
    
    <div id="soal-text"></div>
    <div id="options" class="options"></div>
    
    <div id="feedback" class="hidden"></div>
    
    <div style="margin-top: 2rem;">
      <button id="nextBtn" onclick="nextQuestion()" class="hidden">Soal Selanjutnya â†’</button>
      <button id="backMenuBtn" onclick="backToMenu()" class="hidden">Kembali ke Menu</button>
    </div>
  </div>

  <footer>
    Tambah soal HOTS di array bankSoal (kode JS) â€¢ Semangat masuk Kedokteran PTN, Benyamin! ðŸ’‰
  </footer>
</div>

<script>
// BANK SOAL â€“ TAMBAH SOAL BARU DI SINI (target 50â€“100+ soal HOTS)
const bankSoal = [
  {
    soal: "Seorang pasien Rh- pernah hamil anak Rh+. Setelah transfusi darah Rh+ darurat, muncul hemolisis akut. Mekanisme imunologi utama adalah...",
    pilihan: [
      "A. IgM anti-A/B menyerang eritrosit donor",
      "B. IgG anti-Rh menginduksi hemolisis ekstravaskular",
      "C. Reaksi anafilaksis tipe I",
      "D. Kompleks imun tipe III di ginjal",
      "E. Sitotoksisitas sel T tipe IV"
    ],
    jawaban: "B",
    penjelasan: "Sensitasi Rh dari kehamilan sebelumnya â†’ IgG anti-Rh â†’ fagositosis ekstravaskular oleh makrofag limpa (hemolisis delayed/akut)."
  },
  {
    soal: "Pada ketoasidosis diabetik, anion gap meningkat karena akumulasi anion organik. Anion dominan yang menyebabkan ini adalah...",
    pilihan: [
      "A. Laktat",
      "B. Î²-hidroksibutirat",
      "C. Asam piruvat",
      "D. Klorida",
      "E. Bikarbonat"
    ],
    jawaban: "B",
    penjelasan: "Produksi badan keton (Î²-hidroksibutirat utama) â†’ asidosis metabolik high anion gap pada DKA."
  },
  {
    soal: "Mutasi Î”F508 pada cystic fibrosis menyebabkan protein CFTR tidak mencapai membran karena...",
    pilihan: [
      "A. Gangguan translasi",
      "B. Misfolding â†’ degradasi ER-associated (ERAD)",
      "C. Overekspresi chaperone",
      "D. Mutasi pada domain nuklear",
      "E. Gangguan splicing mRNA"
    ],
    jawaban: "B",
    penjelasan: "Î”F508 â†’ protein salah lipat â†’ diidentifikasi sebagai rusak â†’ didegradasi proteasome di retikulum endoplasma."
  },
  {
    soal: "Enzim kunci glukoneogenesis yang sangat diaktivasi glukagon (melalui penurunan fruktosa-2,6-bisfosfat) adalah...",
    pilihan: [
      "A. Glukokinase",
      "B. Fosfofruktokinase-1",
      "C. Fruktosa-1,6-bisfosfatase",
      "D. Piruvat kinase",
      "E. Glikogen fosforilase"
    ],
    jawaban: "C",
    penjelasan: "Fruktosa-1,6-bisfosfatase diaktivasi saat F2,6BP rendah (glukagon tinggi) â†’ memungkinkan glukoneogenesis berjalan."
  },
  {
    soal: "Keracunan metanol menyebabkan kebutaan karena metabolitnya menghambat enzim mitokondria. Metabolit toksik utama adalah...",
    pilihan: [
      "A. Formaldehida",
      "B. Asam format",
      "C. Metil glikolat",
      "D. Asam asetat",
      "E. Metanol langsung"
    ],
    jawaban: "B",
    penjelasan: "Metanol â†’ formaldehida â†’ asam format â†’ inhibisi sitokrom oksidase â†’ asidosis metabolik & toksisitas saraf optik."
  },
  // Tambahkan soal HOTS baru di sini (contoh pola di atas)
  // Contoh tambahan:
  {
    soal: "Pasien defisiensi G6PD mengonsumsi primaquine. Mekanisme hemolisis akut adalah...",
    pilihan: [
      "A. Penurunan ATP â†’ lisis membran",
      "B. Kurang NADPH â†’ kurang GSH â†’ stres oksidatif eritrosit",
      "C. Inhibisi langsung glikolisis",
      "D. Pembentukan methemoglobin dominan",
      "E. Reaksi autoimun"
    ],
    jawaban: "B",
    penjelasan: "Defisiensi G6PD â†’ jalur pentosa fosfat terganggu â†’ â†“ NADPH â†’ â†“ reduced glutathione â†’ kerusakan oksidatif â†’ hemolisis."
  }
  // Tambahkan ini ke const bankSoal = [ ... ] di kode HTML-mu
{
  soal: "Sebuah rumah sakit menggunakan pompa infus untuk memberikan cairan saline 0,9% kepada pasien. Laju aliran cairan adalah 125 mL/jam. Jika volume total cairan yang dibutuhkan adalah 1 liter, berapa lama waktu yang diperlukan (dalam menit) untuk menyelesaikan infus tersebut? (Asumsikan aliran konstan tanpa kehilangan)",
  pilihan: [
    "A. 400 menit",
    "B. 480 menit",
    "C. 500 menit",
    "D. 520 menit",
    "E. 600 menit"
  ],
  jawaban: "B",
  penjelasan: "Waktu = volume / laju = 1000 mL / 125 mL/jam = 8 jam = 8 Ã— 60 = 480 menit. HOTS: aplikasi konversi satuan dan perhitungan waktu medis."
},
{
  soal: "Dalam sebuah penelitian, distribusi berat badan pasien diabetes menunjukkan rata-rata 75 kg dengan simpangan baku 12 kg. Jika distribusi normal, berapa persen pasien yang memiliki berat badan di atas 99 kg? (Gunakan aturan empiris 68-95-99.7, nilai z â‰ˆ 2 untuk 95%)",
  pilihan: [
    "A. Sekitar 2,5%",
    "B. Sekitar 5%",
    "C. Sekitar 16%",
    "D. Sekitar 32%",
    "E. Kurang dari 1%"
  ],
  jawaban: "A",
  penjelasan: "99 kg = rata-rata + 2 simpangan baku (75 + 24 = 99). Di atas +2Ïƒ â‰ˆ 2,5% (satu sisi distribusi normal). HOTS: interpretasi data statistik klinis."
},
{
  soal: "Seorang pasien mengalami fibrilasi atrium dengan denyut jantung tidak teratur. Jika volume sekuncup (stroke volume) rata-rata 70 mL dan frekuensi jantung 120 bpm, hitung cardiac output (L/menit) pasien tersebut.",
  pilihan: [
    "A. 5,6 L/menit",
    "B. 6,8 L/menit",
    "C. 8,4 L/menit",
    "D. 9,0 L/menit",
    "E. 10,5 L/menit"
  ],
  jawaban: "C",
  penjelasan: "Cardiac output = stroke volume Ã— heart rate = 70 mL Ã— 120 = 8400 mL/menit = 8,4 L/menit. HOTS: aplikasi fisika aliran darah (hemodinamika)."
},
{
  soal: "Pada kasus keracunan CO, hemoglobin membentuk karboksihemoglobin (COHb) yang mengikat CO 200 kali lebih kuat daripada Oâ‚‚. Jika saturasi COHb mencapai 40%, berapa persen kapasitas pengangkutan oksigen darah yang hilang? (Asumsikan kurva disosiasi normal)",
  pilihan: [
    "A. 20%",
    "B. 40%",
    "C. 60%",
    "D. 80%",
    "E. Hampir 100%"
  ],
  jawaban: "B",
  penjelasan: "Kapasitas Oâ‚‚ hilang sebanding dengan % COHb (40% terikat CO â†’ 40% hilang). HOTS: kimia ikatan ligan dan fisiologi respirasi."
},
{
  soal: "Dalam kultur sel kanker, laju pembelahan sel mengikuti model eksponensial: N(t) = Nâ‚€ Ã— 2^(t/T), dengan T = waktu penggandaan 24 jam. Jika awal ada 10^5 sel, berapa sel setelah 72 jam?",
  pilihan: [
    "A. 4 Ã— 10^5",
    "B. 8 Ã— 10^5",
    "C. 1,6 Ã— 10^6",
    "D. 3,2 Ã— 10^6",
    "E. 6,4 Ã— 10^6"
  ],
  jawaban: "B",
  penjelasan: "72 jam / 24 jam = 3 penggandaan â†’ 10^5 Ã— 2^3 = 10^5 Ã— 8 = 8 Ã— 10^5. HOTS: biologi sel + matematika eksponensial."
},
// Fisika Medis HOTS
{
  soal: "Pada pemeriksaan X-ray dada, foton energi 50 keV digunakan. Jika intensitas awal Iâ‚€, setelah menembus jaringan paru (Î¼ = 0,2 cmâ»Â¹, tebal 10 cm), berapa persen intensitas yang tersisa? (Gunakan hukum eksponensial I = Iâ‚€ e^(-Î¼x))",
  pilihan: [
    "A. â‰ˆ 13,5%",
    "B. â‰ˆ 18,3%",
    "C. â‰ˆ 27,1%",
    "D. â‰ˆ 36,8%",
    "E. â‰ˆ 45,0%"
  ],
  jawaban: "A",
  penjelasan: "I/Iâ‚€ = e^(-0,2 Ã— 10) = e^(-2) â‰ˆ 0,135 = 13,5%. HOTS: fisika radiasi medis & atenuasi."
},
// Kimia Organik Klinis
{
  soal: "Aspirin (asam asetilsalisilat) dihidrolisis di usus menjadi asam salisilat dan asam asetat. Jika pKa aspirin 3,5 dan pKa asam salisilat 3,0, bentuk dominan asam salisilat di lumen usus (pH â‰ˆ 6) adalah...",
  pilihan: [
    "A. Bentuk protonasi (HA)",
    "B. Bentuk deprotonasi (Aâ»)",
    "C. Campuran 50:50",
    "D. Tidak terionisasi sama sekali",
    "E. Terikat protein"
  ],
  jawaban: "B",
  penjelasan: "pH 6 >> pKa 3,0 â†’ hampir seluruhnya terionisasi (Aâ»). HOTS: kimia asam-basa obat & farmakokinetik."
},
// Biologi Genetika
{
  soal: "Pada penyakit sickle cell anemia (mutasi HbS), substitusi asam amino valin menggantikan glutamat pada posisi ke-6 rantai Î²-globin. Konsekuensi molekuler utama adalah...",
  pilihan: [
    "A. Penurunan afinitas oksigen hemoglobin",
    "B. Pembentukan polimer HbS saat deoksigenasi â†’ distorsi eritrosit",
    "C. Peningkatan laju glikolisis eritrosit",
    "D. Gangguan sintesis heme",
    "E. Defisiensi enzim G6PD"
  ],
  jawaban: "B",
  penjelasan: "HbS polymerisasi pada kondisi hipoksia â†’ sel sabit â†’ hemolisis & oklusi vaskular. HOTS: genetika molekuler & patofisiologi."
},
// Matematika Penalaran Lanjutan
{
  soal: "Dalam uji klinis obat baru, efektivitas diukur dengan odds ratio (OR) = 2,5 (95% CI: 1,8â€“3,4). Interpretasi yang paling tepat adalah...",
  pilihan: [
    "A. Kemungkinan sukses pengobatan 2,5 kali lebih besar pada kelompok obat",
    "B. Risiko relatif 2,5 kali lebih tinggi",
    "C. Tidak signifikan karena CI melewati 1",
    "D. Signifikan secara statistik (CI tidak melewati 1)",
    "E. Efek samping meningkat 2,5 kali"
  ],
  jawaban: "D",
  penjelasan: "CI tidak mengandung 1 â†’ OR signifikan. OR >1 berarti efek positif. HOTS: statistik inferensial medis."
},
// Fisika Medis Lanjutan
{
  soal: "Pada MRI, medan magnet statis 1,5 T digunakan. Frekuensi resonansi proton hidrogen (Î³/2Ï€ â‰ˆ 42,58 MHz/T) adalah...",
  pilihan: [
    "A. 21,29 MHz",
    "B. 42,58 MHz",
    "C. 63,87 MHz",
    "D. 85,16 MHz",
    "E. 127,74 MHz"
  ],
  jawaban: "C",
  penjelasan: "f = Î³ B / 2Ï€ = 42,58 Ã— 1,5 â‰ˆ 63,87 MHz. HOTS: fisika NMR & imaging medis."
},
// ... Tambahkan sendiri pola serupa untuk mencapai 50â€“100 soal
  // ... tambah puluhan soal lagi sesuai kebutuhan (biologi klinis, metabolisme, imunologi, fisika medis, dll)
];

// Variabel game
let score = 0;
let totalAnswered = 0;
let usedQuestions = [];
let timerInterval = null;
let timeLeft = 60;

const menuEl      = document.getElementById("menu");
const gameEl      = document.getElementById("game");
const soalText    = document.getElementById("soal-text");
const optionsDiv  = document.getElementById("options");
const feedbackDiv = document.getElementById("feedback");
const nextBtn     = document.getElementById("nextBtn");
const backMenuBtn = document.getElementById("backMenuBtn");
const scoreEl     = document.getElementById("score");
const timeDisplay = document.getElementById("time");

// Fungsi bantu
function hideAll() {
  menuEl.classList.add("hidden");
  gameEl.classList.add("hidden");
  feedbackDiv.classList.add("hidden");
  nextBtn.classList.add("hidden");
  backMenuBtn.classList.add("hidden");
  clearInterval(timerInterval);
}

function showMenu() {
  hideAll();
  menuEl.classList.remove("hidden");
  resetGame();
}

function resetGame() {
  score = 0;
  totalAnswered = 0;
  usedQuestions = [];
  scoreEl.textContent = "0";
}

function startLotere() {
  if (bankSoal.length < 5) {
    alert("Bank soal terlalu sedikit! Tambah minimal 5 soal di kode JS.");
    return;
  }
  resetGame();
  hideAll();
  gameEl.classList.remove("hidden");
  totalAnswered = 0;
  nextQuestion();
}

function getRandomSoal() {
  if (usedQuestions.length >= bankSoal.length) usedQuestions = [];
  let idx;
  do {
    idx = Math.floor(Math.random() * bankSoal.length);
  } while (usedQuestions.includes(idx));
  usedQuestions.push(idx);
  return bankSoal[idx];
}

function nextQuestion() {
  if (totalAnswered >= 15) {
    endGame();
    return;
  }

  const soal = getRandomSoal();

  soalText.textContent = soal.soal;
  optionsDiv.innerHTML = "";

  soal.pilihan.forEach((opt, i) => {
    const letter = String.fromCharCode(65 + i); // A B C D E
    const div = document.createElement("div");
    div.className = "option";
    div.textContent = opt;
    div.dataset.letter = letter;
    div.onclick = () => selectAnswer(letter, soal.jawaban, soal.penjelasan);
    optionsDiv.appendChild(div);
  });

  feedbackDiv.classList.add("hidden");
  nextBtn.classList.add("hidden");
  backMenuBtn.classList.add("hidden");

  totalAnswered++;
  timeLeft = 60;
  timeDisplay.textContent = "60";
  timeDisplay.style.color = "var(--danger)";
  startTimer();
}

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timeLeft--;
    timeDisplay.textContent = timeLeft;
    if (timeLeft <= 10) {
      timeDisplay.style.color = timeLeft <= 5 ? "#b91c1c" : "var(--warning)";
    }
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      showFeedback("WAKTU HABIS!", "time-up", "Klik 'Soal Selanjutnya' untuk lanjut");
      nextBtn.classList.remove("hidden");
      backMenuBtn.classList.remove("hidden");
    }
  }, 1000);
}

function selectAnswer(pilihanUser, jawabanBenar, penjelasan) {
  clearInterval(timerInterval);

  const benar = pilihanUser === jawabanBenar;
  if (benar) {
    score++;
    scoreEl.textContent = score;  // UPDATE SKOR REAL-TIME
  }

  // Highlight jawaban
  document.querySelectorAll(".option").forEach(opt => {
    opt.onclick = null;
    if (opt.dataset.letter === jawabanBenar) {
      opt.style.background = "var(--success)";
      opt.style.color = "white";
    }
    if (opt.dataset.letter === pilihanUser && !benar) {
      opt.style.background = "var(--danger)";
      opt.style.color = "white";
    }
  });

  let msg = benar ? "BENAR âœ“" : "SALAH âœ—";
  let cls = benar ? "correct" : "wrong";
  showFeedback(msg, cls, `Penjelasan: ${penjelasan || "Tidak ada penjelasan tambahan"}`);

  nextBtn.classList.remove("hidden");
  backMenuBtn.classList.remove("hidden");
}

function showFeedback(title, cls, text) {
  feedbackDiv.className = `feedback ${cls}`;
  feedbackDiv.innerHTML = `<strong>${title}</strong><br>${text}`;
  feedbackDiv.classList.remove("hidden");
}

function endGame() {
  clearInterval(timerInterval);
  soalText.innerHTML = "<h2>LOTERE SELESAI!</h2>";
  optionsDiv.innerHTML = "";
  feedbackDiv.innerHTML = `
    <strong>Skor Akhir: ${score} / 15</strong><br>
    Persentase: ${(score / 15 * 100).toFixed(1)}%<br><br>
    Terus latihan ya, Benyamin! Kamu pasti bisa tembus Kedokteran PTN impian ðŸ’ªðŸš€
  `;
  feedbackDiv.className = "feedback correct";
  feedbackDiv.classList.remove("hidden");
  nextBtn.classList.add("hidden");
  backMenuBtn.classList.remove("hidden");
}

function backToMenu() {
  if (confirm("Kembali ke menu? Progress lotere saat ini hilang.")) {
    showMenu();
  }
}

// Mulai
showMenu();
</script>
</body>
</html>
