<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bentok Lottere - HOTS Kedokteran PTN</title>
  <style>
    :root {
      --primary: #1e40af;
      --primary-dark: #1e3a8a;
      --success: #22c55e;
      --danger: #ef4444;
      --light: #f3f4f6;
      --dark: #111827;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #e0f2fe, #dbeafe);
      color: var(--dark);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    header {
      background: var(--primary);
      color: white;
      padding: 1.5rem;
      text-align: center;
    }
    h1 { margin-bottom: 0.5rem; }
    .menu, .game-area {
      padding: 2rem;
      text-align: center;
    }
    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      margin: 1rem 0.8rem;
      border-radius: 12px;
      font-size: 1.3rem;
      cursor: pointer;
      transition: all 0.25s;
    }
    button:hover { background: var(--primary-dark); transform: scale(1.05); }
    .options {
      display: grid;
      gap: 14px;
      margin: 2rem 0;
    }
    .option {
      background: var(--light);
      padding: 1.4rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.25s;
      font-size: 1.1rem;
      border: 2px solid transparent;
      text-align: left;
    }
    .option:hover { background: #dbeafe; border-color: var(--primary); }
    .option.selected { background: var(--primary); color: white; border-color: var(--primary-dark); }
    #timer {
      font-size: 1.6rem;
      font-weight: bold;
      color: var(--danger);
      margin: 1.2rem 0;
    }
    #feedback {
      padding: 1.8rem;
      border-radius: 12px;
      margin: 1.8rem 0;
      font-size: 1.15rem;
      line-height: 1.6;
    }
    .correct   { background: #ecfccb; color: #166534; }
    .wrong     { background: #fee2e2; color: #991b1b; }
    .time-up   { background: #fef3c7; color: #92400e; }
    #score-board {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 1.5rem 0;
    }
    #soal-text {
      font-size: 1.3rem;
      line-height: 1.8;
      margin-bottom: 1.8rem;
    }
    .hidden { display: none; }
    footer {
      text-align: center;
      padding: 1.5rem;
      color: #6b7280;
      font-size: 0.95rem;
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>Bentok Lottere</h1>
    <p>HOTS Saintek Persiapan Kedokteran PTN (SNBT 2023-2025 Style)</p>
  </header>

  <div id="menu" class="menu">
    <button onclick="startLotere()">MULAI LOTERE (15 Soal - Timer 60 detik)</button>
    <button onclick="if(confirm('Yakin keluar? Latihanmu akan hilang.')) window.close();">Keluar</button>
  </div>

  <div id="game" class="game-area hidden">
    <div id="score-board">Skor: <span id="score">0</span> / <span id="total">0</span></div>
    <div id="timer" class="hidden">Sisa waktu: <span id="time">60</span> detik</div>
    
    <div id="soal-text"></div>
    <div id="options" class="options"></div>
    
    <div id="feedback" class="hidden"></div>
    
    <div style="text-align:center; margin-top:2rem;">
      <button id="nextBtn" onclick="nextQuestion()" class="hidden">Soal Selanjutnya â†’</button>
      <button id="backMenuBtn" onclick="backToMenu()" class="hidden">Kembali ke Menu</button>
    </div>
  </div>

  <footer>
    Edit bankSoal di kode JS untuk tambah soal HOTS â€¢ Semangat lolos Kedokteran PTN!
  </footer>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// BANK SOAL HOTS â€“ TAMBAH DI SINI (target 100+ soal)
// Format: {soal: "...", pilihan: ["A. ...", ...], jawaban: "C", penjelasan: "..."}
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const bankSoal = [
  // Contoh HOTS Biologi Klinis & Metabolisme (inspirasi SNBT 2023-2025)
  {
    soal: "Seorang pasien dengan riwayat transfusi sebelumnya mengalami demam, menggigil, dan hemoglobinuria 10 menit setelah transfusi darah O Rh+. Mekanisme paling mungkin adalah hemolisis akibat...",
    pilihan: [
      "A. Antibodi IgE terhadap protein plasma donor",
      "B. Aktivasi komplemen oleh IgM anti-A/B",
      "C. IgG anti-Rh yang tersensitisasi sebelumnya",
      "D. Reaksi graft-versus-host dari limfosit donor",
      "E. Transfusion-associated circulatory overload"
    ],
    jawaban: "C",
    penjelasan: "Riwayat sensitasi Rh- â†’ IgG anti-Rh â†’ hemolisis ekstravaskular (dominan pada reaksi Rh), hemoglobinuria jika berat."
  },
  {
    soal: "Pada ketoasidosis diabetik, peningkatan anion gap disebabkan akumulasi anion organik. Anion utama yang terdeteksi dalam urin dan darah adalah...",
    pilihan: [
      "A. Asam laktat",
      "B. Î²-hidroksibutirat",
      "C. Asam sitrat",
      "D. Asam oksalat",
      "E. Klorida"
    ],
    jawaban: "B",
    penjelasan: "Badan keton (Î²-hidroksibutirat > asetoasetat) â†’ asidosis metabolik high anion gap pada DKA."
  },
  {
    soal: "Mutasi Î”F508 pada gen CFTR menyebabkan protein tidak dapat mencapai membran sel karena...",
    pilihan: [
      "A. Gangguan splicing RNA",
      "B. Misfolding protein â†’ degradasi ERAD",
      "C. Penghentian translasi prematur",
      "D. Kerusakan domain transmembran",
      "E. Overekspresi chaperone"
    ],
    jawaban: "B",
    penjelasan: "Î”F508 â†’ misfolding â†’ ER-associated degradation â†’ cystic fibrosis klasik."
  },
  {
    soal: "Dalam glukoneogenesis hati saat puasa panjang, enzim kunci yang diaktivasi glukagon dan diinhibisi insulin adalah...",
    pilihan: [
      "A. Glukokinase",
      "B. Fosfofruktokinase-1",
      "C. Fruktosa-1,6-bisfosfatase",
      "D. Piruvat kinase",
      "E. Glikogen sintase"
    ],
    jawaban: "C",
    penjelasan: "Fruktosa-1,6-bisfosfatase â†‘ oleh glukagon (â†“ F2,6BP) â†’ jalur glukoneogenesis dominan."
  },
  // Contoh HOTS Kimia & Biokimia Klinis
  {
    soal: "Keracunan metanol menyebabkan kebutaan karena metabolitnya menghambat sitokrom oksidase. Metabolit toksik utama tersebut adalah...",
    pilihan: [
      "A. Formaldehida",
      "B. Asam format",
      "C. Metil glikolat",
      "D. Asam asetat",
      "E. Metanol itu sendiri"
    ],
    jawaban: "B",
    penjelasan: "Metanol â†’ formaldehida â†’ asam format (via folate-dependent) â†’ inhibisi kompleks IV mitokondria â†’ asidosis & toksisitas optik."
  },
  // Contoh HOTS Fisika Medis
  {
    soal: "Pada USG Doppler arteri karotis, frekuensi transducer 5 MHz, kecepatan darah 80 cm/s, sudut insonasi 60Â°, kecepatan bunyi jaringan 1540 m/s. Pergeseran frekuensi Doppler (Î”f) adalah...",
    pilihan: [
      "A. 2,07 kHz",
      "B. 4,14 kHz",
      "C. 5,18 kHz",
      "D. 6,21 kHz",
      "E. 8,28 kHz"
    ],
    jawaban: "B",
    penjelasan: "Î”f = (2 Ã— v Ã— f Ã— cosÎ¸) / c = (2 Ã— 0.8 Ã— 5 Ã— 0.5) / 1.54 â‰ˆ 4,14 kHz (pulsa-echo)."
  },
  // Tambah soalmu di sini (copy pola di atas)
  // Misal soal ke-8 sampai 100: variasi kasus klinis, grafik interpretasi, analisis data biokimia/fisiologi
];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Variabel & Fungsi Game (hanya Mode Lotere)
let score = 0;
let totalAnswered = 0;
let usedQuestions = [];
let timerInterval = null;
let timeLeft = 60;

const menuEl      = document.getElementById("menu");
const gameEl      = document.getElementById("game");
const soalText    = document.getElementById("soal-text");
const optionsDiv  = document.getElementById("options");
const feedbackDiv = document.getElementById("feedback");
const nextBtn     = document.getElementById("nextBtn");
const backMenuBtn = document.getElementById("backMenuBtn");
const scoreEl     = document.getElementById("score");
const totalEl     = document.getElementById("total");
const timerEl     = document.getElementById("timer");
const timeDisplay = document.getElementById("time");

function hideAll() {
  menuEl.classList.add("hidden");
  gameEl.classList.add("hidden");
  feedbackDiv.classList.add("hidden");
  nextBtn.classList.add("hidden");
  backMenuBtn.classList.add("hidden");
  timerEl.classList.add("hidden");
  clearInterval(timerInterval);
}

function showMenu() {
  hideAll();
  menuEl.classList.remove("hidden");
  resetGame();
}

function resetGame() {
  score = 0; totalAnswered = 0; usedQuestions = [];
  scoreEl.textContent = "0";
  totalEl.textContent = "0";
}

function startLotere() {
  if (bankSoal.length < 5) {
    alert("Bank soal terlalu sedikit! Tambah minimal 5 soal di kode JS.");
    return;
  }
  resetGame();
  hideAll();
  gameEl.classList.remove("hidden");
  timerEl.classList.remove("hidden");
  totalEl.textContent = "15";
  nextQuestion();
}

function getRandomSoal() {
  if (usedQuestions.length >= bankSoal.length) usedQuestions = [];
  let idx;
  do { idx = Math.floor(Math.random() * bankSoal.length); } 
  while (usedQuestions.includes(idx));
  usedQuestions.push(idx);
  return bankSoal[idx];
}

function nextQuestion() {
  if (totalAnswered >= 15) {
    endGame();
    return;
  }

  const soal = getRandomSoal();

  soalText.textContent = soal.soal;
  optionsDiv.innerHTML = "";

  soal.pilihan.forEach((opt, i) => {
    const letter = String.fromCharCode(65 + i);
    const div = document.createElement("div");
    div.className = "option";
    div.textContent = opt;
    div.dataset.letter = letter;
    div.onclick = () => selectAnswer(letter, soal.jawaban, soal.penjelasan);
    optionsDiv.appendChild(div);
  });

  feedbackDiv.classList.add("hidden");
  nextBtn.classList.add("hidden");
  backMenuBtn.classList.add("hidden");
  totalAnswered++;
  scoreEl.textContent = score;

  timeLeft = 60;
  timeDisplay.textContent = "60";
  startTimer();
}

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timeLeft--;
    timeDisplay.textContent = timeLeft;
    if (timeLeft <= 10) timeDisplay.style.color = timeLeft <= 5 ? "#dc2626" : "#d97706";
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      showFeedback("WAKTU HABIS!", "time-up", "Jawaban benar akan ditampilkan setelah klik 'Soal Selanjutnya'");
      nextBtn.classList.remove("hidden");
      backMenuBtn.classList.remove("hidden");
    }
  }, 1000);
}

function selectAnswer(pilihanUser, jawabanBenar, penjelasan) {
  clearInterval(timerInterval);

  const benar = pilihanUser === jawabanBenar;
  if (benar) score++;
  scoreEl.textContent = score;

  document.querySelectorAll(".option").forEach(opt => {
    opt.onclick = null;
    if (opt.dataset.letter === jawabanBenar) {
      opt.style.background = "var(--success)";
      opt.style.color = "white";
    }
    if (opt.dataset.letter === pilihanUser && !benar) {
      opt.style.background = "var(--danger)";
      opt.style.color = "white";
    }
  });

  let msg = benar ? "BENAR âœ“" : "SALAH âœ—";
  let cls = benar ? "correct" : "wrong";
  showFeedback(msg, cls, `Penjelasan: ${penjelasan || "Tidak ada penjelasan tambahan"}`);

  nextBtn.classList.remove("hidden");
  backMenuBtn.classList.remove("hidden");
}

function showFeedback(title, cls, text) {
  feedbackDiv.className = `feedback ${cls}`;
  feedbackDiv.innerHTML = `<strong>${title}</strong><br>${text}`;
  feedbackDiv.classList.remove("hidden");
}

function endGame() {
  clearInterval(timerInterval);
  soalText.innerHTML = "<h2>LOTERE SELESAI!</h2>";
  optionsDiv.innerHTML = "";
  feedbackDiv.innerHTML = `
    <strong>Skor Akhir: ${score} / 15</strong><br>
    Persentase: ${(score / 15 * 100).toFixed(1)}% <br>
    Terus latihan ya, Benyamin! ðŸ’ª
  `;
  feedbackDiv.className = "feedback correct";
  feedbackDiv.classList.remove("hidden");
  nextBtn.classList.add("hidden");
  backMenuBtn.classList.remove("hidden");
}

function backToMenu() {
  if (confirm("Kembali ke menu? Progress lotere hilang.")) showMenu();
}

// Init
showMenu();
</script>
</body>
</html>
